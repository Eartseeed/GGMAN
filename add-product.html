<!DOCTYPE html>
<html lang="lo">
<head>
<meta charset="UTF-8">
<title>โ เปเบเบตเปเบกเปเบกเบเบน</title>

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="Phetsarath OT.css">
</head>

<body>

<h2>โ เปเบเบตเปเบกเปเบกเบเบนเบชเบดเบเบเปเบฒ</h2>

<div class="admin-container">

  <div class="admin-card">
    <div class="admin-title">๐ เบเปเปเบกเบนเบเปเบกเบเบน</div>

    <!-- FORM -->
    <div class="form-grid">
      <!-- NAME -->
      <input id="pname" placeholder="เบเบทเปเบชเบดเบเบเปเบฒ">

      <!-- PRICE (KIP) -->
      <input id="pprice" type="number" placeholder="เบฅเบฒเบเบฒ (เบเบตเบ)">

      <!-- STOCK -->
      <input id="pstock" type="number" placeholder="๐ฆ เบเบณเบเบงเบ Stock">

      <!-- CATEGORY -->
      <input id="pcategory" placeholder="๐ เปเบงเบเบชเบดเบเบเปเบฒ">

      <!-- IMAGE -->
      <input type="file" id="pimg" accept="image/*">
    </div>

    <!-- BUTTON -->
    <div style="margin-top:16px; display:flex; gap:12px;">
      <button class="btn-main" onclick="addProduct()">๐พ เบเบฑเบเบเบถเบ</button>
      <button class="btn-back" onclick="location.href='index.html'">โฌ เบเบฑเบ</button>
    </div>

  </div>

</div>

<script>
/* =====================
   ADD PRODUCT (NO BARCODE)
===================== */
function addProduct() {
  const name     = document.getElementById("pname").value.trim();
  const price    = Number(document.getElementById("pprice").value);
  const stock    = Number(document.getElementById("pstock").value);
  const category = document.getElementById("pcategory").value.trim();
  const file     = document.getElementById("pimg").files[0];

  if (!name || !price || isNaN(stock) || !file) {
    alert("โ เบเบฐเบฅเบธเบเบฒเบเปเบญเบเบเปเปเบกเบนเบเปเบซเปเบเบปเบ");
    return;
  }

  let products = JSON.parse(localStorage.getItem("products") || "[]");

  // โ เบเบฑเบเบเบทเปเบเปเบณ
  if (products.some(p => p.name === name)) {
    alert("โ เบเบทเปเบชเบดเบเบเปเบฒเบเบตเปเบกเบตเบขเบนเปเปเบฅเปเบง");
    return;
  }

  const reader = new FileReader();
  reader.onload = e => {
    products.push({
      name,
      price,        // KIP
      img: e.target.result,
      category,
      stockIn: stock,
      sold: 0
    });

    localStorage.setItem("products", JSON.stringify(products));
    alert("โ เบเบฑเบเบเบถเบเบชเบณเปเบฅเบฑเบ");

    // Clear form
    document.getElementById("pname").value = "";
    document.getElementById("pprice").value = "";
    document.getElementById("pstock").value = "";
    document.getElementById("pcategory").value = "";
    document.getElementById("pimg").value = "";
  };

  reader.readAsDataURL(file);
}
</script>

</body>
</html>